AdPlug Hacking HOWTO
Copyright (c) 2002 Simon Peter <dn.tlp@gmx.net>
$Id$

Introduction
------------
This document gives some coding guidelines for people wishing to hack around
in AdPlug. Be sure to also read the overall and system-specific INSTALL
files in the distribution's base directory to learn more about the build
systems.

Coding Style
------------
I do not really enforce any coding style guidelines (i don't adhere to any
style guidelines myself, so... ;) ), but it would be nice if you follow the
overall coding style, used throughout most of AdPlug's source files. If you
don't, that's perfectly okay, too.

Most of today's "super-intelligent" editors, like MSVC's one or GNU Emacs'
c-mode, have their own idea of what the code has to look like, anyway. And
since most people tend to use these, there's no point in torturing them to
always having to change anything their editor thinks it knows better. ;)

Debug Logging
-------------
AdPlug recently offers centralized debug log management. If you like to
implement debug logging inside your code, please follow these guidelines:

To implement debug logging, #include "debug.h" in your code (this header is
*NOT* being installed with the rest of the AdPlug header files into your
standard include directory! It is only available in AdPlug's src/
subdirectory!).

'debug.h' is C code, so it is useable from both C and C++ sources. The only
function you have to use is the LogWrite(fmt, ...) function. LogOpen() and
LogClose() are used by AdPlug internally. LogWrite() works exactly like
printf(), instead that it writes to a logfile, rather than on the console.
Refer to printf() for LogWrite() usage instructions.

Please format your log messages like this:
- If your method/function is going to output a lot of debug info (i.e. more
than one line), please put a LogWrite() directly at the beginning of your
function, which looks like this:

	LogWrite("*** yourclass::yourmethod(param1,param2) ***\n);

And put the following line before every return from your function:

	LogWrite("--- yourclass::yourmethod ---\n");

This way, one can easily inspect the logfile and know to which function
every logfile-line belongs. The '***' lines mark the start of a function,
and the '---' line mark the end.

Please substitute 'param*' with the corresponding parameter values of your
function, if that is reasonable. For example, it won't help much to log a
pointer value - just put something bogus or helpful there, or noting (i.e.
just a comma, so the logfile reader knows, to which parameters the other
values correspond). But logging the values of passed ints or strings could
be very helpful.

- If your method/function is going to output just one line, format the line
something like this:

	LogWrite("yourclass::yourmethod(param1,param2): your message\n");

You don't need the '***' and '---' beginning and end markers then.

- For asynchronous threads, there is no way but to prefix any line with the
function name, because these messages will be sprayed throughout the
logfile.
